<!doctype html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title></title><script defer="defer">/*! For license information please see main.js.LICENSE.txt */
(()=>{var t={433:t=>{t.exports=[[[1.8,0,72,,,.2,,4,-2,6,50,.15,,6],[,0,655,,,.09,3,1.65,,,,,.02,3.8,-.1,,.2],[1.2,0,23,,,.2,3,4,,,3,.9,.05],[1.5,0,740,,,.15,2,.2,-.1,-.15,9,.02,,.1,.12,,.06]],[[[3,-1,13,13,13,8,13,,,,,,,,,,,,11,11,11,6,11,,,,,,,,,,,,10,10,10,6,10,,,,,,,,,6,8,10,8,8,8,5,13,,8,8,8,5,13,,,,,,],[,1,25,,25,,,,,,,,,,,,,25,25,,25,,,,,,,25,,,25,,25,25,25,,25,,,,,,,,,,,25,25,25,25,,25,,,,,,,,,,,,,,],[2,-1,13,,25,,13,13,25,13,,13,25,13,13,13,25,,13,,25,,13,13,25,13,,13,25,13,13,13,,,13,,25,,13,13,25,13,,13,25,13,13,13,25,,13,,25,,13,13,25,13,,13,25,13,13,13,25,,]],[[3,-1,13,13,13,8,13,,,,,,,,,,,,11,11,11,6,11,,,,,,,,,,,,10,10,10,6,10,,,,,,,,,6,8,10,8,8,8,5,13,,8,8,8,5,13,8,8,8,5,13],[2,-1,13,,25,,13,13,25,13,,13,25,13,13,13,25,27,11,,23,,11,11,23,11,,11,23,11,11,11,23,22,18,,30,,18,18,30,18,,18,30,18,18,18,30,22,13,,25,,13,13,25,13,,13,25,13,13,13,25,,],[,1,25,,25,,,,,,,,,,,,,25,25,,25,,,,,,,,,,,,,,25,,25,,,,,,,,,,,25,25,25,25,,25,,,,,,,,,,,,,,],[1,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,13,13,13,13,13,13,13,13]],[[3,-1,13,13,13,8,13,,13,15,17,17,15,13,20,20,18,17,18,,,,17,,15,,,,17,,18,,22,22,22,,18,,,,25,25,25,,22,,,18,20,22,20,,,,,,,,,,,,,,,,],[2,-1,13,,25,,13,13,25,13,,13,25,13,13,13,25,27,11,,23,,11,11,23,11,,11,23,11,11,11,23,22,18,,30,,18,18,30,18,,18,30,18,18,18,30,22,13,,25,,13,13,25,13,,13,25,13,13,13,25,,],[,1,25,,,,,,25,25,,25,25,,,,,,25,,,,,,25,25,,25,25,,,,,,25,,,,,,25,25,,25,25,,,,,,25,,,,,,25,25,,25,25,,,,,,],[1,1,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,,13,,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,13,,13]],[[3,-1,13,,25,,13,13,25,13,,13,25,13,13,13,25,,11,,23,,11,11,23,11,,11,23,11,11,11,23,,10,,22,,10,10,22,10,,10,22,10,10,6,8,10,20,25,20,20,25,20,,20,25,20,20,20,25,,20,,],[2,-1,13,,25,,13,13,25,13,,13,25,13,13,13,25,,13,,25,,13,13,25,13,,13,25,13,13,13,25,,13,,25,,13,13,25,13,,13,25,13,13,13,25,,13,,25,,13,13,25,13,,13,25,13,13,13,25,,],[,1,25,,,,,,25,25,,25,25,,,,,,25,,,,,,25,25,,25,25,,,,,,25,,,,,,25,25,,25,25,,,,,,25,,,,,,25,25,,25,25,,,,,,],[1,1,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,,13,,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,13,,13]],[[3,-1,13,,,,,,8,,17,15,13,,17,15,13,,15,,,,10,13,15,10,13,15,10,13,15,10,13,15,12,,,,,,8,15,,,,,17,15,13,8,13,,,,,,10,8,,20,20,20,20,20,20,20],[2,-1,13,,25,,13,13,25,13,,13,25,13,13,13,25,,15,,27,,15,15,27,15,,15,27,15,15,15,27,32,20,,32,,20,20,32,20,,20,32,20,20,20,32,,13,,25,,13,13,25,20,,20,32,20,20,20,32,,],[,1,25,,,,,,25,25,,25,25,,,,,,25,,,,,,25,25,,25,25,,,,,,25,,,,,,25,25,,25,25,,,,,,25,,,,,,25,25,,25,25,,,,,,],[1,1,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,,13,,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,13,,13]],[[3,-1,13,,,,,,8,,17,,,,18,17,15,,18,,,,13,,,,10,,,,6,,,,8,12,15,12,20,,8,12,15,12,20,,22,20,15,,13,,,,,,10,,8,,,,,8,20,8],[2,-1,13,,25,25,13,,25,25,13,,25,25,13,,25,25,15,,27,27,15,,27,27,15,,27,27,15,,27,27,20,,32,32,20,,32,32,20,,32,32,20,,32,32,13,,25,25,13,,25,25,20,,32,32,20,,32,34],[,1,25,,,,,,25,25,,25,25,,,,,,25,,,,,,25,25,,25,25,,,,,,25,,,,,,25,25,,25,25,,,,,,25,,,,,,25,25,,25,25,,,,,,],[1,1,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,,13,,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,13,,13]],[[3,-1,13,,,,,,8,,17,,,,18,17,15,,18,,,,13,,,,10,,,,6,,,,8,12,15,12,20,,8,12,15,12,20,,22,20,15,,13,,,,,,10,,8,,,,,8,20,8],[,1,25,,,,,,25,25,,25,25,,,,,,25,,,,,,25,25,,25,25,,,,,,25,,,,,,25,25,,25,25,,,,,,25,,,,,,25,25,,25,25,,,,,,],[1,1,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,,13,,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,13,,13]],[[,1,25,,,,,,25,25,,25,25,,,,,,25,,,,,,25,25,,25,25,,,,,,25,,,,,,25,25,,25,25,,,,,,25,,,,25,,,25,,,,25,25,25,25,25],[1,1,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,,13,,,,,,13,,,,,,,,13,,,,,,,,13,13,,13,,13,13,13,13,13,13,13]]],[0,1,2,2,3,3,2,2,4,4,5,6,6,7,2,2,3],,{title:"I am back",notes:"MOD pattern data for the song 'I am back', by Sky",instruments:["Instrument 0","Instrument 1","Instrument 2","Instrument 3"],patterns:["Pattern 0","Pattern 1","Pattern 2","Pattern 3","Pattern 4","Pattern 5","Pattern 6","Pattern 7"]}]},39:t=>{t.exports.P=zzfx=(...t)=>zzfxP(zzfxG(...t)),zzfxP=(...t)=>{let e=zzfxX.createBufferSource(),i=zzfxX.createBuffer(t.length,t[0].length,zzfxR);return t.map(((t,e)=>i.getChannelData(e).set(t))),e.buffer=i,e.connect(zzfxX.destination),e.start(),e},zzfxG=(t=1,e=.05,i=220,s=0,h=0,n=.1,r=0,a=1,o=0,d=0,l=0,c=0,p=0,u=0,x=0,f=0,w=0,g=1,y=0,m=0)=>{let _,v,b=2*Math.PI,A=o*=500*b/zzfxR**2,M=(0<x?1:-1)*b/4,k=i*=(1+2*e*Math.random()-e)*b/zzfxR,E=[],z=0,S=0,L=0,B=1,C=0,P=0,R=0;for(s=99+zzfxR*s,y*=zzfxR,h*=zzfxR,n*=zzfxR,w*=zzfxR,d*=500*b/zzfxR**3,x*=b/zzfxR,l*=b/zzfxR,c*=zzfxR,p=zzfxR*p|0,v=s+y+h+n+w|0;L<v;E[L++]=R)++P%(100*f|0)||(R=r?1<r?2<r?3<r?Math.sin((z%b)**3):Math.max(Math.min(Math.tan(z),1),-1):1-(2*z/b%2+2)%2:1-4*Math.abs(Math.round(z/b)-z/b):Math.sin(z),R=(p?1-m+m*Math.sin(2*Math.PI*L/p):1)*(0<R?1:-1)*Math.abs(R)**a*t*zzfxV*(L<s?L/s:L<s+y?1-(L-s)/y*(1-g):L<s+y+h?g:L<v-w?(v-L-w)/n*g:0),R=w?R/2+(w>L?0:(L<v-w?1:(v-L)/w)*E[L-w|0]/2):R),_=(i+=o+=d)*Math.sin(S*x-M),z+=_-_*u*(1-1e9*(Math.sin(L)+1)%2),S+=_-_*u*(1-1e9*(Math.sin(L)**2+1)%2),B&&++B>c&&(i+=l,k+=l,B=0),!p||++C%p||(i=k,o=A,B=B||1);return E},zzfxV=.3,zzfxR=44100,zzfxX=new(window.AudioContext||webkitAudioContext),t.exports.W=(t,e,i,s=125)=>{let h,n,r,a,o,d,l,c,p,u,x,f,w,g,y,m=0,_=[],v=[],b=[],A=0,M=0,k=1,E={},z=zzfxR/s*60>>2;for(;k;A++)_=[k=c=x=w=0],i.map(((s,x)=>{for(l=e[s][A]||[0,0,0],k|=!!e[s][A],y=w+(e[s][0].length-2-!c)*z,g=x==i.length-1,n=2,a=w;n<l.length+g;c=++n){for(o=l[n],p=n==l.length+g-1&&g||u!=(l[0]||0)|o|0,r=0;r<z&&c;r++>z-99&&p?f+=(f<1)/99:0)d=(1-f)*_[m++]/2||0,v[a]=(v[a]||0)-d*M+d,b[a]=(b[a++]||0)+d*M+d;o&&(f=o%1,M=l[1]||0,(o|=0)&&(_=E[[u=l[m=0]||0,o]]=E[[u,o]]||(h=[...t[u]],h[2]*=2**((o-12)/12),o>0?zzfxG(...h):[])))}w=y}));return[v,b]}}},e={};function i(s){var h=e[s];if(void 0!==h)return h.exports;var n=e[s]={exports:{}};return t[s](n,n.exports,i),n.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";class t{constructor(t){this.item=t}next(){const t=this.item;return t?(this.item=t.next,{value:t,done:!1}):{value:null,done:!0}}}class e{constructor(){this.next,this.prev,this.list}append(t){const e=this.list;if(!(t&&t.append&&t.prepend&&t.detach))throw new Error("An argument without append, prepend, or detach methods was given to `Item#append`.");return!(!e||this===t)&&(t.detach(),this.next&&(t.next=this.next,this.next.prev=t),t.prev=this,t.list=e,this.next=t,this!==e.tail&&e.tail||(e.tail=t),e.size++,t)}prepend(t){const e=this.list;if(!(t&&t.append&&t.prepend&&t.detach))throw new Error("An argument without append, prepend, or detach methods was given to `Item#prepend`.");return!(!e||this===t)&&(t.detach(),this.prev&&(t.prev=this.prev,this.prev.next=t),t.next=this,t.list=e,this.prev=t,this===e.head&&(e.head=t),e.tail||(e.tail=this),e.size++,t)}detach(){const t=this.list;return t?(t.tail===this&&(t.tail=this.prev),t.head===this&&(t.head=this.next),t.tail===t.head&&(t.tail=null),this.prev&&(this.prev.next=this.next),this.next&&(this.next.prev=this.prev),this.prev=null,this.next=null,this.list=null,t.size--,this):this}}e.prototype.next=null,e.prototype.prev=null,e.prototype.list=null;class s{static from(t){return h(new this,t)}static of(...t){return h(new this,t)}constructor(...t){this.size,this.head,this.tail,h(this,t)}append(t){if(!t)return!1;if(!t.append||!t.prepend||!t.detach)throw new Error("An argument without append, prepend, or detach methods was given to `List#append`.");return this.tail?this.tail.append(t):this.head?this.head.append(t):(t.detach(),t.list=this,this.head=t,this.size++,t)}prepend(t){if(!t)return!1;if(!t.append||!t.prepend||!t.detach)throw new Error("An argument without append, prepend, or detach methods was given to `List#prepend`.");return this.head?this.head.prepend(t):(t.detach(),t.list=this,this.head=t,this.size++,t)}toArray(){let t=this.head;const e=[];for(;t;)e.push(t),t=t.next;return e}[Symbol.iterator](){return new t(this.head)}}function h(t,e){if(!e)return t;if(e[Symbol.iterator]){const i=e[Symbol.iterator]();let s;for(;(s=i.next())&&!s.done;)t.append(s.value)}else{let i=-1;for(;++i<e.length;){const s=e[i];t.append(s)}}return t}s.prototype.size=0,s.prototype.tail=null,s.prototype.head=null;let n=()=>{},r="position:absolute;width:1px;height:1px;overflow:hidden;clip:rect(0,0,0,0);";function a(t,e){let i=e.parentNode;if(t.setAttribute("data-kontra",""),i){let s=i.querySelector("[data-kontra]:last-of-type")||e;i.insertBefore(t,s.nextSibling)}else document.body.appendChild(t)}function o(t,e){let i=t.indexOf(e);if(-1!=i)return t.splice(i,1),!0}let d,l,c={};function p(t,e){c[t]=c[t]||[],c[t].push(e)}function u(t,...e){(c[t]||[]).map((t=>t(...e)))}let x={get:(t,e)=>"_proxy"==e||n};function f(){return d}function w(){return l}function g(t,{contextless:e=!1}={}){if(d=document.getElementById(t)||t||document.querySelector("canvas"),e&&(d=d||new Proxy({},x)),!d)throw Error("You must provide a canvas element for the game");return l=d.getContext("2d")||new Proxy({},x),l.imageSmoothingEnabled=!1,u("init"),{canvas:d,context:l}}function y(t,e){let i=Math.sin(e),s=Math.cos(e);return{x:t.x*s-t.y*i,y:t.x*i+t.y*s}}function m(t,e,i){return Math.min(Math.max(t,i),e)}function _(t){let{x:e=0,y:i=0,width:s,height:h}=t.world||t;return t.mapwidth&&(s=t.mapwidth,h=t.mapheight),t.anchor&&(e-=s*t.anchor.x,i-=h*t.anchor.y),s<0&&(e+=s,s*=-1),h<0&&(i+=h,h*=-1),{x:e,y:i,width:s,height:h}}class v{constructor(t=0,e=0,i={}){null!=t.x?(this.x=t.x,this.y=t.y):(this.x=t,this.y=e),i._c&&(this.clamp(i._a,i._b,i._d,i._e),this.x=t,this.y=e)}set(t){this.x=t.x,this.y=t.y}add(t){return new v(this.x+t.x,this.y+t.y,this)}subtract(t){return new v(this.x-t.x,this.y-t.y,this)}scale(t){return new v(this.x*t,this.y*t)}normalize(t=this.length()||1){return new v(this.x/t,this.y/t)}dot(t){return this.x*t.x+this.y*t.y}length(){return Math.hypot(this.x,this.y)}distance(t){return Math.hypot(this.x-t.x,this.y-t.y)}angle(t){return Math.acos(this.dot(t)/(this.length()*t.length()))}direction(){return Math.atan2(this.y,this.x)}clamp(t,e,i,s){this._c=!0,this._a=t,this._b=e,this._d=i,this._e=s}get x(){return this._x}get y(){return this._y}set x(t){this._x=this._c?m(this._a,this._d,t):t}set y(t){this._y=this._c?m(this._b,this._e,t):t}}function b(){return new v(...arguments)}class A{constructor(t){return this.init(t)}init(t={}){this.position=b(),this.velocity=b(),this.acceleration=b(),this.ttl=1/0,Object.assign(this,t)}update(t){this.advance(t)}advance(t){let e=this.acceleration;t&&(e=e.scale(t)),this.velocity=this.velocity.add(e);let i=this.velocity;t&&(i=i.scale(t)),this.position=this.position.add(i),this._pc(),this.ttl--}get dx(){return this.velocity.x}get dy(){return this.velocity.y}set dx(t){this.velocity.x=t}set dy(t){this.velocity.y=t}get ddx(){return this.acceleration.x}get ddy(){return this.acceleration.y}set ddx(t){this.acceleration.x=t}set ddy(t){this.acceleration.y=t}isAlive(){return this.ttl>0}_pc(){}}class M extends A{init({width:t=0,height:e=0,context:i=w(),render:s=this.draw,update:h=this.advance,children:n=[],anchor:r={x:0,y:0},opacity:a=1,rotation:o=0,scaleX:d=1,scaleY:l=1,...c}={}){this._c=[],super.init({width:t,height:e,context:i,anchor:r,opacity:a,rotation:o,scaleX:d,scaleY:l,...c}),this._di=!0,this._uw(),this.addChild(n),this._rf=s,this._uf=h,p("init",(()=>{this.context??=w()}))}update(t){this._uf(t),this.children.map((e=>e.update&&e.update(t)))}render(){let t=this.context;t.save(),(this.x||this.y)&&t.translate(this.x,this.y),this.rotation&&t.rotate(this.rotation),1==this.scaleX&&1==this.scaleY||t.scale(this.scaleX,this.scaleY);let e=-this.width*this.anchor.x,i=-this.height*this.anchor.y;(e||i)&&t.translate(e,i),this.context.globalAlpha=this.opacity,this._rf(),(e||i)&&t.translate(-e,-i),this.children.map((t=>t.render&&t.render())),t.restore()}draw(){}_pc(){this._uw(),this.children.map((t=>t._pc()))}get x(){return this.position.x}get y(){return this.position.y}set x(t){this.position.x=t,this._pc()}set y(t){this.position.y=t,this._pc()}get width(){return this._w}set width(t){this._w=t,this._pc()}get height(){return this._h}set height(t){this._h=t,this._pc()}_uw(){if(!this._di)return;let{_wx:t=0,_wy:e=0,_wo:i=1,_wr:s=0,_wsx:h=1,_wsy:n=1}=this.parent||{};this._wx=this.x,this._wy=this.y,this._ww=this.width,this._wh=this.height,this._wo=i*this.opacity,this._wsx=h*this.scaleX,this._wsy=n*this.scaleY,this._wx=this._wx*h,this._wy=this._wy*n,this._ww=this.width*this._wsx,this._wh=this.height*this._wsy,this._wr=s+this.rotation;let{x:r,y:a}=y({x:this._wx,y:this._wy},s);this._wx=r,this._wy=a,this._wx+=t,this._wy+=e}get world(){return{x:this._wx,y:this._wy,width:this._ww,height:this._wh,opacity:this._wo,rotation:this._wr,scaleX:this._wsx,scaleY:this._wsy}}set children(t){this.removeChild(this._c),this.addChild(t)}get children(){return this._c}addChild(...t){t.flat().map((t=>{this.children.push(t),t.parent=this,t._pc=t._pc||n,t._pc()}))}removeChild(...t){t.flat().map((t=>{o(this.children,t)&&(t.parent=null,t._pc())}))}get opacity(){return this._opa}set opacity(t){this._opa=m(0,1,t),this._pc()}get rotation(){return this._rot}set rotation(t){this._rot=t,this._pc()}setScale(t,e=t){this.scaleX=t,this.scaleY=e}get scaleX(){return this._scx}set scaleX(t){this._scx=t,this._pc()}get scaleY(){return this._scy}set scaleY(t){this._scy=t,this._pc()}}class k extends M{init({image:t,width:e=(t?t.width:void 0),height:i=(t?t.height:void 0),...s}={}){super.init({image:t,width:e,height:i,...s})}get animations(){return this._a}set animations(t){let e,i;for(e in this._a={},t)this._a[e]=t[e].clone(),i=i||this._a[e];this.currentAnimation=i,this.width=this.width||i.width,this.height=this.height||i.height}playAnimation(t){this.currentAnimation?.stop(),this.currentAnimation=this.animations[t],this.currentAnimation.start()}advance(t){super.advance(t),this.currentAnimation?.update(t)}draw(){this.image&&this.context.drawImage(this.image,0,0,this.image.width,this.image.height),this.currentAnimation&&this.currentAnimation.render({x:0,y:0,width:this.width,height:this.height,context:this.context}),this.color&&(this.context.fillStyle=this.color,this.context.fillRect(0,0,this.width,this.height))}}let E=/(\d+)(\w+)/;class z extends M{init({text:t="",textAlign:e="",lineHeight:i=1,font:s=w()?.font,...h}={}){t=""+t,super.init({text:t,textAlign:e,lineHeight:i,font:s,...h}),this.context&&this._p(),p("init",(()=>{this.font??=w().font,this._p()}))}get width(){return this._w}set width(t){this._d=!0,this._w=t,this._fw=t}get text(){return this._t}set text(t){this._d=!0,this._t=""+t}get font(){return this._f}set font(t){this._d=!0,this._f=t,this._fs=function(t){if(!t)return{computed:0};let e=t.match(E),i=+e[1];return{size:i,unit:e[2],computed:i}}(t).computed}get lineHeight(){return this._lh}set lineHeight(t){this._d=!0,this._lh=t}render(){this._d&&this._p(),super.render()}_p(){this._s=[],this._d=!1;let t=this.context,e=[this.text];if(t.font=this.font,e=this.text.split("\n"),this._fw&&e.map((e=>{let i=e.split(" "),s=i.shift(),h=s;i.map((e=>{h+=" "+e,t.measureText(h).width>this._fw&&(this._s.push(s),h=e),s=h})),this._s.push(h)})),!this._s.length&&this.text.includes("\n")){let i=0;e.map((e=>{this._s.push(e),i=Math.max(i,t.measureText(e).width)})),this._w=this._fw||i}this._s.length||(this._s.push(this.text),this._w=this._fw||t.measureText(this.text).width),this.height=this._fs+(this._s.length-1)*this._fs*this.lineHeight,this._uw()}draw(){let t=0,e=this.textAlign,i=this.context;e=this.textAlign||("rtl"==i.canvas.dir?"right":"left"),t="right"==e?this.width:"center"==e?this.width/2|0:0,this._s.map(((s,h)=>{i.textBaseline="top",i.textAlign=e,i.fillStyle=this.color,i.font=this.font,this.strokeColor&&(i.strokeStyle=this.strokeColor,i.lineWidth=this.lineWidth??1,i.strokeText(s,t,this._fs*this.lineHeight*h)),i.fillText(s,t,this._fs*this.lineHeight*h)}))}}function S(){return new z(...arguments)}let L=new WeakMap,B={},C={},P={0:"left",1:"middle",2:"right"};function R(t,e){let{x:i,y:s,width:h,height:n}=_(t);do{i-=t.sx||0,s-=t.sy||0}while(t=t.parent);let r=e.x-Math.max(i,Math.min(e.x,i+h)),a=e.y-Math.max(s,Math.min(e.y,s+n));return r*r+a*a<e.radius*e.radius}function T(t){let e=t._lf.length?t._lf:t._cf;for(let i=e.length-1;i>=0;i--){let s=e[i];if(s.collidesWithPointer?s.collidesWithPointer(t):R(s,t))return s}}function D(t,e){return parseFloat(t.getPropertyValue(e))||0}function X(t){let e=null!=t.button?P[t.button]:"left";C[e]=!0,H(t,"onDown")}function I(t){let e=null!=t.button?P[t.button]:"left";C[e]=!1,H(t,"onUp")}function O(t){H(t,"onOver")}function j(t){L.get(t.target)._oo=null,C={}}function Y(t,e,i){let s=T(t);s&&s[e]&&s[e](i),B[e]&&B[e](i,s),"onOver"==e&&(s!=t._oo&&t._oo&&t._oo.onOut&&t._oo.onOut(i),t._oo=s)}function H(t,e){t.preventDefault();let i=t.target,s=L.get(i),{scaleX:h,scaleY:n,offsetX:r,offsetY:a}=function(t){let{canvas:e,_s:i}=t,s=e.getBoundingClientRect(),h="none"!=i.transform?i.transform.replace("matrix(","").split(","):[1,1,1,1],n=parseFloat(h[0]),r=parseFloat(h[3]),a=(D(i,"border-left-width")+D(i,"border-right-width"))*n,o=(D(i,"border-top-width")+D(i,"border-bottom-width"))*r,d=(D(i,"padding-left")+D(i,"padding-right"))*n,l=(D(i,"padding-top")+D(i,"padding-bottom"))*r;return{scaleX:(s.width-a-d)/e.width,scaleY:(s.height-o-l)/e.height,offsetX:s.left+(D(i,"border-left-width")+D(i,"padding-left"))*n,offsetY:s.top+(D(i,"border-top-width")+D(i,"padding-top"))*r}}(s);t.type.includes("touch")?(Array.from(t.touches).map((({clientX:t,clientY:e,identifier:i})=>{let o=s.touches[i];o||(o=s.touches[i]={start:{x:(t-r)/h,y:(e-a)/n}},s.touches.length++),o.changed=!1})),Array.from(t.changedTouches).map((({clientX:i,clientY:o,identifier:d})=>{let l=s.touches[d];l.changed=!0,l.x=s.x=(i-r)/h,l.y=s.y=(o-a)/n,Y(s,e,t),u("touchChanged",t,s.touches),"onUp"==e&&(delete s.touches[d],s.touches.length--,s.touches.length||u("touchEnd"))}))):(s.x=(t.clientX-r)/h,s.y=(t.clientY-a)/n,Y(s,e,t))}function W({radius:t=5,canvas:e=f()}={}){let i=L.get(e);if(!i){let s=window.getComputedStyle(e);i={x:0,y:0,radius:t,touches:{length:0},canvas:e,_cf:[],_lf:[],_o:[],_oo:null,_s:s},L.set(e,i)}return e.addEventListener("mousedown",X),e.addEventListener("touchstart",X),e.addEventListener("mouseup",I),e.addEventListener("touchend",I),e.addEventListener("touchcancel",I),e.addEventListener("blur",j),e.addEventListener("mousemove",O),e.addEventListener("touchmove",O),i._t||(i._t=!0,p("tick",(()=>{i._lf.length=0,i._cf.map((t=>{i._lf.push(t)})),i._cf.length=0}))),i}function G(...t){t.flat().map((t=>{let e=t.context?t.context.canvas:f(),i=L.get(e);if(!i)throw new ReferenceError("Pointer events not initialized for the objects canvas");t._r||(t._r=t.render,t.render=function(){i._cf.push(this),this._r()},i._o.push(t))}))}class N extends k{init({padX:t=0,padY:e=0,text:i,disabled:s=!1,onDown:h,onUp:o,...d}={}){super.init({padX:t,padY:e,...d}),this.textNode=S({...i,context:this.context}),this.width||(this.width=this.textNode.width,this.height=this.textNode.height),G(this),this.addChild(this.textNode),this._od=h||n,this._ou=o||n;let l=this._dn=document.createElement("button");l.style=r,l.textContent=this.text,s&&this.disable(),l.addEventListener("focus",(()=>this.focus())),l.addEventListener("blur",(()=>this.blur())),l.addEventListener("keydown",(t=>this._kd(t))),l.addEventListener("keyup",(t=>this._ku(t))),a(l,this.context.canvas),this._uw(),this._p()}get text(){return this.textNode.text}set text(t){this._d=!0,this.textNode.text=t}destroy(){this._dn.remove()}_p(){this.text!=this._dn.textContent&&(this._dn.textContent=this.text),this.textNode._p();let t=this.textNode.width+2*this.padX,e=this.textNode.height+2*this.padY;this.width=Math.max(t,this.width),this.height=Math.max(e,this.height),this._uw()}render(){this._d&&this._p(),super.render()}enable(){this.disabled=this._dn.disabled=!1,this.onEnable()}disable(){this.disabled=this._dn.disabled=!0,this.onDisable()}focus(){this.disabled||(this.focused=!0,document.activeElement!=this._dn&&this._dn.focus(),this.onFocus())}blur(){this.focused=!1,document.activeElement==this._dn&&this._dn.blur(),this.onBlur()}onOver(){this.disabled||(this.hovered=!0)}onOut(){this.hovered=!1}onEnable(){}onDisable(){}onFocus(){}onBlur(){}onDown(){this.disabled||(this.pressed=!0,this._od())}onUp(){this.disabled||(this.pressed=!1,this._ou())}_kd(t){"Enter"!=t.code&&"Space"!=t.code||this.onDown()}_ku(t){"Enter"!=t.code&&"Space"!=t.code||this.onUp()}}let U=[],F={},q={},Q={0:"south",1:"east",2:"west",3:"north",4:"leftshoulder",5:"rightshoulder",6:"lefttrigger",7:"righttrigger",8:"select",9:"start",10:"leftstick",11:"rightstick",12:"dpadup",13:"dpaddown",14:"dpadleft",15:"dpadright"};function J(t){U[t.gamepad.index]={pressedButtons:{},axes:{}}}function V(t){delete U[t.gamepad.index]}function Z(){U.map((t=>{t.pressedButtons={},t.axes={}}))}function $(){let t=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads:[];for(let e=0;e<t.length;e++){let i=t[e];if(!i)continue;i.buttons.map(((t,e)=>{let s=Q[e],{pressed:h}=t,{pressedButtons:n}=U[i.index],r=n[s];!r&&h?[F[i.index],F].map((e=>{e?.[s]?.(i,t,s)})):r&&!h&&[q[i.index],q].map((e=>{e?.[s]?.(i,t,s)})),n[s]=h}));let{axes:s}=U[i.index];s.leftstickx=i.axes[0],s.leftsticky=i.axes[1],s.rightstickx=i.axes[2],s.rightsticky=i.axes[3]}}function K(){window.addEventListener("gamepadconnected",J),window.addEventListener("gamepaddisconnected",V),window.addEventListener("blur",Z),p("tick",$)}let tt,et={},it=!1,st={swipe:{touches:1,threshold:10,touchend({0:t}){let e=t.x-t.start.x,i=t.y-t.start.y,s=Math.abs(e),h=Math.abs(i);if(!(s<this.threshold&&h<this.threshold))return s>h?e<0?"left":"right":i<0?"up":"down"}},pinch:{touches:2,threshold:2,touchstart({0:t,1:e}){this.prevDist=Math.hypot(t.x-e.x,t.y-e.y)},touchmove({0:t,1:e}){let i=Math.hypot(t.x-e.x,t.y-e.y);if(Math.abs(i-this.prevDist)<this.threshold)return;let s=i>this.prevDist?"out":"in";return this.prevDist=i,s}}};function ht(){it||(it=!0,p("touchChanged",((t,e)=>{Object.keys(st).map((i=>{let s,h=st[i];(!tt||tt==i)&&e.length==h.touches&&[...Array(e.length).keys()].every((t=>e[t]))&&(s=h[t.type]?.(e)??"")&&et[i+s]&&(tt=i,et[i+s](t,e))}))})),p("touchEnd",(()=>{tt=0})))}let nt={},rt={},at={},ot={Enter:"enter",Escape:"esc",Space:"space",ArrowLeft:"arrowleft",ArrowUp:"arrowup",ArrowRight:"arrowright",ArrowDown:"arrowdown"};function dt(t=n,e){t._pd&&e.preventDefault(),t(e)}function lt(t){let e=ot[t.code],i=nt[e];at[e]=!0,dt(i,t)}function ct(t){let e=ot[t.code],i=rt[e];at[e]=!1,dt(i,t)}function pt(){at={}}function ut(){let t;for(t=0;t<26;t++)ot["Key"+String.fromCharCode(t+65)]=String.fromCharCode(t+97);for(t=0;t<10;t++)ot["Digit"+t]=ot["Numpad"+t]=""+t;window.addEventListener("keydown",lt),window.addEventListener("keyup",ct),window.addEventListener("blur",pt)}function xt(t){return!![].concat(t).some((t=>at[t]))}function ft(t={}){ut();let e=W(t.pointer);return ht(),K(),{pointer:e}}function wt(t,e){return t/e|0}function gt(t,e){return t/e|0}class yt{constructor(t={}){let{width:e,height:i,tilewidth:s,tileheight:h,tilesets:n}=t,r=e*s,a=i*h,o=document.createElement("canvas");o.width=r,o.height=a,this._c=o,this._ctx=o.getContext("2d"),n.map((e=>{let{__k:i,location:s}=window,h=(i?i.dm.get(t):"")||s.href,{source:n}=e;if(n){if(!i)throw Error('You must use "load" or "loadData" to resolve tileset.source');let t=i.d[i.u(n,h)];if(!t)throw Error(`You must load the tileset source "${n}" before loading the tileset`);Object.keys(t).map((i=>{e[i]=t[i]}))}let{image:r}=e;if(""+r===r){if(!i)throw Error('You must use "load" or "loadImage" to resolve tileset.image');let t=i.i[i.u(r,h)];if(!t)throw Error(`You must load the image "${r}" before loading the tileset`);e.image=t}})),Object.assign(this,{context:w(),layerMap:{},layerCanvases:{},mapwidth:r,mapheight:a,_sx:0,_sy:0,_o:[],...t}),this.context&&this._p(),p("init",(()=>{this.context??=w(),this._p()}))}get sx(){return this._sx}get sy(){return this._sy}set sx(t){let e=Math.max(0,this.mapwidth-f().width);this._sx=m(0,e,t)}set sy(t){let e=Math.max(0,this.mapheight-f().height);this._sy=m(0,e,t)}set objects(t){this.remove(this._o),this.add(t)}get objects(){return this._o}add(...t){t.flat().map((t=>{this._o.push(t),t.parent=this}))}remove(...t){t.flat().map((t=>{o(this._o,t),t.parent=null}))}setTileAtLayer(t,e,i){let{layerMap:s,tileheight:h,tilewidth:n,width:r}=this,{row:a,col:o,x:d,y:l}=e,c=a??wt(l,h),p=o??gt(d,n);s[t]&&(this._d=!0,s[t]._d=!0,s[t].data[c*r+p]=i)}setLayer(t,e){let{layerMap:i}=this;i[t]&&(this._d=!0,i[t]._d=!0,i[t].data=e)}layerCollidesWith(t,e){let{tilewidth:i,tileheight:s,layerMap:h}=this,{x:n,y:r,width:a,height:o}=_(e),d=wt(r,s),l=gt(n,i),c=wt(r+o,s),p=gt(n+a,i),u=h[t];for(let t=d;t<=c;t++)for(let e=l;e<=p;e++)if(u.data[e+t*this.width])return!0;return!1}tileAtLayer(t,e){let{layerMap:i,tileheight:s,tilewidth:h,width:n}=this,{row:r,col:a,x:o,y:d}=e,l=r??wt(d,s),c=a??gt(o,h);return i[t]?i[t].data[l*n+c]:-1}render(t=this._c,e=!0){let{_d:i,context:s,sx:h=0,sy:n=0}=this;i&&this._p();let{width:r,height:a}=f(),o=Math.min(t.width,r),d=Math.min(t.height,a);s.drawImage(t,h,n,o,d,0,0,o,d),e&&(s.save(),(h||n)&&s.translate(-h,-n),this.objects.map((t=>t.render&&t.render())),s.restore())}renderLayer(t){let{layerCanvases:e,layerMap:i}=this,s=i[t],h=e[t],n=h?.getContext("2d");if(!h){let{mapwidth:i,mapheight:r}=this;h=document.createElement("canvas"),n=h.getContext("2d"),h.width=i,h.height=r,e[t]=h,this._r(s,n)}s._d&&(s._d=!1,n.clearRect(0,0,h.width,h.height),this._r(s,n)),this.render(h,!1)}_p(){let{_ctx:t,layers:e=[],layerMap:i}=this;this._d=!1,e.map((e=>{let{name:s,data:h,visible:n}=e;e._d=!1,i[s]=e,h&&0!=n&&this._r(e,t)}))}_r(t,e){let{opacity:i,data:s=[]}=t,{tilesets:h,width:n,tilewidth:r,tileheight:a}=this;e.save(),e.globalAlpha=i,s.map(((t,i)=>{if(!t)return;let s;for(let e=h.length-1;e>=0&&(s=h[e],!(t/s.firstgid>=1));e--);let{image:o,margin:d=0,firstgid:l,columns:c}=s,p=t-l,u=c??o.width/(r+d)|0,x=i%n*r,f=(i/n|0)*a,w=p%u*(r+d),g=(p/u|0)*(a+d);e.drawImage(o,w,g,r,a,x,f,r,a)})),e.restore()}}function mt(){return new yt(...arguments)}var _t=i(39),vt=i(433),bt=i.n(vt);const At=JSON.parse('{"backgroundcolor":"#84c669","compressionlevel":-1,"editorsettings":{"export":{"format":"json"}},"height":10,"infinite":false,"layers":[{"data":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,1,3,3,4,1,0,0,0,0,0,0,0,0,0,0,0,8,2,3,3,10,10,19,4,1,15,15,15,15,15,15,15,15,15,1,2,13,10,10,10,10,10,19,3,3,4,15,15,15,15,15,2,3,3,13,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10],"height":10,"id":15,"name":"layer-6","opacity":1,"type":"tilelayer","visible":true,"width":19,"x":0,"y":0},{"data":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,0,0,0,0,0,8,2,4,8,1,8,1,0,0,0,0,1,1,8,8,0,2,3,4,0,9,19,3,3,4,8,0,0,0,0,1,2,3,4,8,16,17,18,1,16,17,17,17,18,1,8,0,0,0,8,9,10,11,0,2,3,3,3,3,3,4,8,2,3,4,0,0,0,8,9,10,11,8,16,17,17,17,17,17,18,1,9,10,11,1,0,0,8,16,17,18,2,3,3,3,3,4,1,1,1,9,10,11,8,0,0,0,0,1,1,16,17,17,17,6,19,4,8,2,13,10,11,1,0,0,0,0,0,8,8,8,8,0,16,17,18,8,16,17,17,18,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,0,0,0],"height":10,"id":2,"name":"layer-2","opacity":1,"type":"tilelayer","visible":false,"width":19,"x":0,"y":0},{"data":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,0,0,8,8,0,1,1,0,0,0,0,0,15,15,0,0,0,8,8,8,1,1,8,8,1,2,3,3,3,3,3,4,15,0,0,0,0,8,0,8,8,8,0,15,9,10,10,10,10,10,11,15,0,0,0,0,0,0,0,0,15,15,15,16,17,17,17,17,17,18,1,8,0,0,0,8,0,0,2,3,3,3,3,3,3,4,8,0,1,1,0,0,0,0,0,0,8,9,10,10,10,10,10,10,11,0,0,0,0,0,0,0,0,8,0,1,16,17,17,17,17,17,17,18,1,0,0,0,8,0,0,1,1,0,8,0,0,8,8,8,0,0,1,1,0,8,1,1,0,0,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0],"height":10,"id":9,"name":"layer-4","opacity":1,"type":"tilelayer","visible":false,"width":19,"x":0,"y":0}],"nextlayerid":17,"nextobjectid":1,"orientation":"orthogonal","renderorder":"right-down","tiledversion":"1.10.2","tileheight":16,"tilesets":[{"firstgid":1,"source":"tilemap_packed_compact_tileset.json"}],"tilewidth":16,"type":"map","version":"1.10","width":19}'),Mt=new Image;let kt;const Et=14,zt="Arial, sans-serif",St=`bold italic 14px ${zt}`,Lt=`italic bold 24px ${zt}`,Bt="rgba(0, 0, 0, 0.15)",Ct="rgb(251, 251, 251)",Pt="rgb(51, 51, 51)",Rt="rgb(251, 51, 51)",Tt=["Fishing is a dirty game\nBut someone has to do it!","My little mermaid","Time Attack!","Use them wisely","There's plenty fish in the sea","Don't count your fish\nbefore they're caught!","Like a fish needs water","Fish or cut bait","Every fish has It's day"],Dt=t=>t[Math.floor(Math.random()*t.length)],Xt=()=>`"${Dt(Tt)}"`;let It=!1;let Ot,jt,Yt,Ht;class Wt extends e{constructor(t="rgb(132, 198, 105)"){super(),this.color=t}clear(){jt.clearRect(0,0,Yt,Ht),jt.fillStyle=this.color,jt.fillRect(0,0,Yt,Ht)}update(){}render(){this.clear()}}class Gt extends Wt{render(){jt.fillStyle=Bt,jt.fillRect(0,0,Yt,Ht/5)}}class Nt extends N{constructor(t,e,i){super({x:e,y:i,text:{text:t,font:St}})}render(){this.hovered?(Ot.style.cursor="pointer",this.textNode.color=Rt):this.textNode.color=Ct,this.disabled&&(this.textNode.color=Pt),super.render()}}class Ut extends Gt{constructor(t){super(),this.text=t,this.xBtn=new Nt("x",Yt-21,7)}render(){this.clear(),super.render(),this.xBtn.render(),jt.save(),jt.translate(7,Ht/5+Et),jt.font=St,jt.fillStyle=Ct,this.text.split(/\n/).forEach(((t,e)=>{jt.fillText(t,0,16.8*e)})),jt.restore()}}class Ft extends Ut{constructor(t,e,i){super(t),this.yAct=e,this.nAct=i,this.yBtn=new Nt("YES",Yt/5,Ht/1.5),this.nBtn=new Nt("NO",Yt/1.25,Ht/1.5)}update(){super.update(),this.yBtn.update(),this.nBtn.update(),this.yBtn.pressed?this.yAct():(this.nBtn.pressed||this.xBtn.pressed)&&this.nAct()}render(){super.render(),this.yBtn.render(),this.nBtn.render()}}class qt extends Ut{constructor(t,e=3e3){super(t),this.timer=new Qt(e)}update(){super.update(),this.timer.update()}render(){super.render(),jt.save(),jt.translate(7,Ht/1.25),jt.lineWidth=4,jt.strokeStyle=Bt,jt.fillStyle=Ct,jt.fillRect(0,0,Yt-Et,16),jt.strokeRect(0,0,Yt-Et,16),jt.fillStyle=Rt,jt.fillRect(4,4,(Yt-Et-8)*this.timer.phita,8),jt.restore()}}class Qt{constructor(t){this.phita=0,this.dur=t,this.before=performance.now(),this.after=this.before}update(){this.after=performance.now(),this.phita=Math.min((this.after-this.before)/this.dur,1)}}class Jt extends Wt{constructor(t=500){super(),this.timer=new Qt(t)}update(){this.timer.update()}render(){super.render(),jt.save(),jt.globalAlpha=this.timer.phita<=.5?this.timer.phita:1-this.timer.phita,jt.fillStyle=Ct,jt.fillRect(0,0,Yt,Ht),jt.restore()}}class Vt extends qt{constructor(t,e){super(t),this.nextSlide=e}update(){if(super.update(),1===this.timer.phita||this.xBtn.pressed||xt("x")){const t=we.append(this.nextSlide());we.head=t}}}class Zt extends Ut{update(){if(super.update(),this.xBtn.pressed){const t=we.append(new $t);we.head=t}}}class $t extends Wt{constructor(){super(),this.text="Trench fisher",this.destinations=["start","help","about","version"].map((function(t,e){return new Nt(` ${t}`,Yt/3,Ht/3+e*Et*1.2)})),this.timer=new Qt(3e3);const t=()=>{this.timer.update(),kt.sy=10-10*this.timer.phita,this.timer.phita<1&&requestAnimationFrame(t)};t()}update(){super.update();const t=t=>{const e=we.append(new Zt(t));we.head=e},[e,i,s,h]=this.destinations;e.pressed?(()=>{const t=we.append(new ie);we.head=t})():i.pressed?t("controls:\n  ArrowLeft: Left direction key\n  ArrowRight: Right direction key"):s.pressed?t("author: john swana"):h.pressed&&t("version: 1.0")}render(){super.render(),kt.renderLayer("layer-6"),jt.save(),jt.fillStyle=Bt,jt.fillRect(0,0,Yt,Ht),jt.translate(Yt/4,Ht/3-7),jt.fillStyle=Rt,jt.font=Lt,jt.textBaseline="bottom",jt.strokeStyle=Pt,jt.lineWidth=2,jt.strokeText(this.text,0,0),jt.fillText(this.text,0,0),jt.beginPath(),jt.moveTo(0,0),jt.lineTo(150*this.timer.phita,0),jt.closePath(),jt.strokeStyle=Rt,jt.lineWidth=2,jt.stroke(),jt.restore(),this.destinations.forEach((t=>t.render()))}}class Kt extends Gt{constructor(t){super(),this.text=t,this.xBtn=new Nt("x",Yt-21,7)}render(){super.render(),this.xBtn.render(),jt.font=St,jt.fillStyle=Ct,jt.textBaseline="top",jt.fillText(this.text,7,7)}}const te=[{row:2,col:3,data:{name:"crocodile island"}},{row:7,col:4,data:{name:"zambezi"}},{row:8,col:8,data:{name:"boiling pot"}},{row:8,col:12,data:{name:"baobab island"}},{row:4,col:13,data:{name:"falty rocks"}},{row:8,col:17,data:{name:"tranquil isle"}},{row:3,col:15,data:{name:"Mosi-oa-Tunya"}},{row:3,col:5,data:{name:"devils pool"}}].map(((t,e)=>(t.data.id=e+1,t.data.state=new Map([["score",0]]),t)));class ee extends Nt{constructor(t,e,i,s){super(t,16*i,16*e),this.data=s}update(){if(super.update(),this.pressed){const t=we.append(new Vt(Xt(),(()=>new ae(this.data))));we.head=t}}}class ie extends Kt{constructor(){super("WorldMap"),this.locationLabels=te.map(((t,e,i)=>{const s=new ee(`${t.data.id}.`,t.row,t.col,t.data);return null!=i[e-1]&&i[e-1].data.state.get("score")<10&&(s.disabled=!0),s}))}destroy(){super.destroy(),this.locationLabels.forEach((t=>t.destroy()))}update(){if(super.update(),this.xBtn.pressed){const t=we.append(new $t);we.head=t}this.locationLabels.forEach((t=>t.update()))}render(){super.clear(),kt.renderLayer("layer-2"),this.locationLabels.forEach((t=>{jt.save(),jt.translate(0,Math.random()-.5),t.render(),jt.restore()})),super.render()}}class se{constructor(t){this.state=t}render(){jt.font=St,jt.fillStyle=Ct,jt.textBaseline="top";const t=Array.from(this.state.entries()).map((t=>t.join(": "))).join("  ");jt.fillText(t,7,7)}}class he extends Gt{constructor(t){super(),this.text=t,this.xBtn=new Nt("x",Yt-21,7)}render(){super.render(),this.xBtn.render(),jt.font=St,jt.fillStyle=Ct,jt.fillText(this.text,7,Ht/5+Et)}}const ne=[{row:4,col:4,data:{}},{row:5,col:16,data:{}}];class re extends ee{constructor(t,e,i,s){super(t,e,i),this.data=s}update(){if(this.pressed){const t=new de("Hint:\nMove the hook above the fish to bait.\nuse arrow keys to maintain...\nacceleration of the hook.\nfishing is about patience. enjoy",(()=>we.append(new fe("fishing spot",this.data,Yt/1.5),3e3)));we.head=t}}}class ae extends he{constructor(t){super(`"${t.name}"`),this.data=t,this.hud=new se(this.data.state),this.locationLabels=ne.map((({row:t,col:e},i,s)=>{const h=new re(`${i+1}.`,t,e,this.data);return s[i-1]&&this.data.state.get("score")<5&&(h.disabled=!0),h}))}update(){if(super.update(),this.xBtn.pressed){const t=we.append(new Vt(Xt(),(()=>new ie)));we.head=t}this.locationLabels.forEach((t=>t.update()))}render(){super.clear(),kt.renderLayer("layer-4"),this.locationLabels.forEach((t=>{jt.save(),jt.translate(0,Math.random()-.5),t.render(),jt.restore()})),super.render(),this.hud.render()}}class oe extends N{constructor(t,e,i){super({x:e,y:i,anchor:{x:.5,y:.5},text:{text:t,color:Ct,anchor:{x:.5,y:.5},font:Lt}}),this.originX=e,this.originY=i}render(){jt.beginPath(),jt.arc(this.position.x,this.position.y,24*.8,2*Math.PI,0),jt.closePath(),jt.fillStyle=Bt,jt.fill(),super.render()}}class de extends Ut{constructor(t,e,i=3e3){super(t),this.timer=new Qt(i),this.nextSlide=e}update(){if(super.update(),this.timer.update(),1===this.timer.phita||this.xBtn.pressed||xt("x")){const t=we.append(this.nextSlide());we.head=t}}}class le{constructor(t,...e){this.bodies=[...e],this.width=t}update(t,e){this.bodies.forEach((i=>{i.update(t,e),i.pos<0&&(i.pos=0,i.vel=0),i.pos>this.width&&(i.pos=this.width,i.vel=0)}))}}class ce extends he{constructor(t,e){super(t),this.data=e,this.hud=new se(e.state),this.progress=0,this.yBtn=new oe("⟨",24,Ht-24,24),this.nBtn=new oe("⟩",Yt-24,Ht-24,24),this.dur=3e4,this.barWidth=Yt/4,this.timer=new Qt(this.dur)}update(){super.update(),this.timer.update();const t=this.hud.state.get("score");if(this.hud.state.clear(),this.hud.state.set("score",t),this.xBtn.pressed){const t=we.prepend(new de("Saving progress...",(()=>new ae(this.data))));return we.head=t,void(It&&(0,_t.P)(...[,,528,.01,,.48,,.6,-11.6,,,,.32,4.2]))}if(1==this.timer.phita){const t=we.prepend(new de("Game Over!",(()=>new ae(this.data))));return we.head=t,void(It&&(0,_t.P)(...[,,333,.01,0,.9,4,1.9,,,,,,.5,,.6]))}this.hud.state.set("progress",`${Math.round(100*this.progress)}%`),this.hud.state.set("time",`00:${Math.round((1-this.timer.phita)*(this.dur/1e3)).toString().padStart(2,0)}`)}render(){if(super.render(),kt.renderLayer("layer-6"),navigator.userAgent.match(/Mobile|Android/)){jt.fillStyle=Bt;const t=Ht/1.5-7;jt.fillRect(0,t,Yt,Ht-t),this.yBtn.render(),this.nBtn.render()}}}class pe{constructor(t){this.pos=t,this.vel=0,this.accel=0,this.direction=1}update(t,e){this.vel+=this.accel*e*this.direction,this.pos+=this.vel*e,(this.pos<0||this.pos>Yt/4)&&(this.direction*=-1)}}class ue extends pe{constructor(t,e){super(e),Object.assign(this,t)}}const xe=[{name:"Tigerfish",accel:32},{name:"Vundu",accel:24},{name:"Yellow-belly bream",accel:12},{name:"Tilapia",accel:22},{name:"African pike",accel:24},{name:"Electric catfish",accel:40}].map(((t,e)=>(t.id=e,t)));class fe extends ce{constructor(t,e,i){super(t,e),this.hook=new pe(Yt/2),this.hook.hooked=!1,this.rodX=i,this.nextLevel=()=>{e.rodX=this.rodX;const t=this.hud.state.get("score");this.hud.state.clear(),this.hud.state.set("score",t+5);const i=we.prepend(new de(`you caught a "${this.target.name}"`,(()=>new ae(this.data))));we.head=i,It&&(0,_t.P)(...[,,80,.3,.4,.7,2,.1,-.73,3.42,-430,.09,.17,,,,.19])},this.offset=(Yt-this.barWidth)/2;const s=Dt(xe);this.target=new ue(s,this.barWidth/2),this.world=new le(this.barWidth,this.target,this.hook)}update(t,e){let i=0;(this.yBtn.pressed||xt("arrowleft"))&&(i-=1),(this.nBtn.pressed||xt("arrowright"))&&(i+=1),this.hook.accel=100,this.hook.direction=i,this.world.update(t,e),Math.abs(this.hook.pos-this.target.pos)<this.barWidth/8?(this.hook.hooked=!0,this.progress+=e/15):this.hook.hooked=!1,this.progress>=1?this.nextLevel():super.update()}render(){super.clear(),super.render(),this.hud.render(),jt.save(),jt.beginPath(),jt.moveTo(this.rodX,Ht/2),jt.lineTo(Yt/2,Ht/3),jt.translate(this.offset,0),jt.fillStyle="rgb(105, 132, 198)",jt.fillRect(0,Ht/1.25,this.barWidth,8),jt.save(),jt.translate(this.hook.pos,Ht/1.25),jt.lineTo(0,0),jt.fillStyle=this.hook.hooked?Rt:Bt,jt.fillRect(-8,0,16,8),jt.drawImage(Mt,80,32,16,16,-4,0,8,8),jt.restore(),jt.translate(this.target.pos,Ht/1.25),jt.moveTo(0,0),jt.scale(this.target.direction/-2,1),jt.drawImage(Mt,96,this.target.id%3*16,16,16,0,0,16,16),jt.closePath(),jt.strokeStyle=Rt,jt.stroke(),jt.restore()}}const we=new class extends s{append(t){const e=new Wt,i=new Jt;return e.update=()=>{if(i.update(),1==i.timer.phita){const e=super.append(t);this.head=e,It&&(0,_t.P)(...[,,539,0,.04,.29,1,1.92,,,567,.02,.02,,,,.04])}},e.render=()=>i.render(),super.append(e)}};let ge,ye,me,_e;const ve=()=>{_e=performance.now(),me=me||_e,ge=_e-me,ye+=ge,me=_e,ge/=1e3,requestAnimationFrame(ve),we.head.update(ye,ge),we.head.render(ye,ge)};window.addEventListener("DOMContentLoaded",(function(){const t=g();Ot=t.canvas,jt=t.context,Yt=Ot.width=300,Ht=Ot.height=150,ft(),ut(),Mt.onload=function(){kt=new mt(Object.assign(At,{tilesets:[{firstgid:1,image:Mt}]}));const t=()=>{const t=we.append(new Vt("Loading",(()=>new $t)));we.head=t};we.head=we.prepend(new Ft("Do you want sound?",(()=>{It=!0;zzfxP(...e).loop=!0,t()}),t)),ve()},Mt.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHAAAAAwCAMAAAD+Zg4VAAAAZlBMVEUAAAB14/+ExmkAAADZ9/9lpVb/zWWL2H1GxOTqpWyf6/+EhITPglTZ2dn9vlOdGBgyCwvmIiJwExP///9KSkp11yxLjBzg1RqPiRRbWA0rVQ3jhij8W1uZ/0v/9ULw1LQlJSWzs7MncmP7AAAAAXRSTlMAQObYZgAAAyxJREFUeNq114eW8joMBOCAbFp6qMn293/JK4XxOboC8XsLs5XmD0OUORTLP87CpCCiQkXApsGdI3/prBF7OV3i7wzwtU8kwJemeUki/mD1iMDRl/8N7gJ/zeDnR6tE3t9+jz2qYHU3TMUo3y6IEPUciD545artnCpK7GXenOZc8FW8foDIYJSX1D5UVucA2CLpMidicznvYdv2bTsQkT1o9AYrWTYgCQyIPJUqrvPAgsp6GPqhrGsCePtkeXuy+gaBoy9veZOZoIjl0A4H7NAEIFZ3E0IuCLEdxNOgemnX1ZVbIPMFezlU61ywoANEDWIesUGs7ofBmA+WB6px3CwRjAdAj8NEz+J3wJr4ZyjLmu6C27BRK7tb3LogHglQRGyTGMQJFPMI8O7GzBPQoE6wO0SoxFhEe9AA9OOCEB0Qc4joeQybHHATskGIGvQf4WcGFyYyVeFxH+qa+T0oLfZ/8O1I9EQwcgz4+XEiDepec8RdWITAPzvj3Qcr/XCiI0eJaHhdvZlbDPNE2XmV+gpqjuhNvONEGkS+DbJndyigfrS8pKfT8XSaiEiBafoxHEHPuXMKcF5SabGbPpym46T60L6qeTt0QLSK7cPpND3ow3UeuHbAu314mqhwwZgHRgW67wH6EGIOiIV80Gsw24cs6j5UJ4D8k7cDOn04SR+inp4J2j6Ep884wR+Gx6e2oC97fagSv3kulQcY7xFY/3k9+aDqw1UhWa3S3x+DGMzCxvah8X4Fyuc4vZs59H4m8r3iVyAHXF0TJfDz40Ku9yuwAkjd137/1dHVPnMu5HgCQnRGAv/DMyB3kxj7tivLrt3TvEHxziM5HkCDOBtcr81RCpCxjr9l7kS8XM6Xy0hEN54G/cH3QfkcJ0TXE6fvCANfj+N5TH1ovFXeJKLwowE5IrRUpD8Qy/Eyog/tHMq5NRO8LeB7IMTLSN4ceq1j4n1asiD6UItmDpHF0gCWiz54fQ8TiD50jhvdUwlZIgleqqTDSYPD0HGGIYHow1H60HoatMn/TN+1nA6e6UM7F7oYdVDUWWBBEni6D905xNJWzALdkD+Hfn4BokH+A66+PLvlr2T4AAAAAElFTkSuQmCC";const e=(0,_t.W)(...bt())}))})()})();</script><style type="text/css">body,html{height:100%}body{background:#000;display:flex;margin:0}canvas{image-rendering:pixelated;margin:auto;max-width:600px;width:100%}</style></head><body><canvas></canvas></body></html>